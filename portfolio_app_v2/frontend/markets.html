<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∫—Ä–∏–Ω–µ—Ä —Ä—ã–Ω–∫–∞ ‚Äî AssetAlpha</title>
    <script>(function(){document.documentElement.setAttribute('data-theme',localStorage.getItem('theme')||'dark');})()</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/markets.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
</head>
<body>

    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
        <div class="hamburger"><span></span><span></span><span></span></div>
    </button>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="dashboard">

        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <div class="logo-icon">AA</div>
                <span class="logo-text">AssetAlpha</span>
            </div>
            <nav class="nav-section">
                <div class="nav-label">–ì–ª–∞–≤–Ω–æ–µ</div>
                <a href="index.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" rx="1"/>
                        <rect x="14" y="3" width="7" height="7" rx="1"/>
                        <rect x="3" y="14" width="7" height="7" rx="1"/>
                        <rect x="14" y="14" width="7" height="7" rx="1"/>
                    </svg>
                    –ü–æ—Ä—Ç—Ñ–µ–ª—å
                </a>
                <a href="markets.html" class="nav-item active">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                    –°–∫—Ä–∏–Ω–µ—Ä —Ä—ã–Ω–∫–∞
                </a>
            </nav>
            <nav class="nav-section">
                <div class="nav-label">–ê–∫–∫–∞—É–Ω—Ç</div>
                <a href="settings.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.6 9"/>
                    </svg>
                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="theme-toggle">
                    <div class="theme-toggle-label">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                        </svg>
                        –¢–µ–º–∞
                    </div>
                    <div class="theme-switch" id="themeSwitch"></div>
                </div>
                <button class="logout-btn" onclick="window.location.href='login.html'">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    –í—ã—Ö–æ–¥
                </button>
            </div>
        </aside>

        <main class="main-content">
            <div class="header">
                <div class="header-left">
                    <h1>–°–∫—Ä–∏–Ω–µ—Ä —Ä—ã–Ω–∫–∞</h1>
                    <p class="header-subtitle">–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ –∞–∫—Ü–∏—è–º</p>
                </div>
            </div>

            <div class="container">

                <!-- Search & Filters -->
                <div class="card">
                    <div class="search-filters">
                        <div class="search-wrapper">
                            <input type="text" id="marketSearch" class="search-input form-input"
                                placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–∏–∫–µ—Ä—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é...">
                            <span class="search-icon">üîç</span>
                        </div>
                        <div class="filter-tabs">
                            <button class="filter-tab active" data-filter="all">–í—Å–µ</button>
                            <button class="filter-tab" data-filter="favorites">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
                            <button class="filter-tab" data-filter="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</button>
                            <button class="filter-tab" data-filter="finance">–§–∏–Ω–∞–Ω—Å—ã</button>
                            <button class="filter-tab" data-filter="energy">–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</button>
                        </div>
                    </div>
                </div>

                <!-- Market Table + Trending -->
                <div class="markets-grid">

                    <div class="card">
                        <table class="market-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>–¢–∏–∫–µ—Ä</th>
                                    <th class="text-right">–¶–µ–Ω–∞</th>
                                    <th class="text-right">Œî 24—á</th>
                                    <th class="text-right">–ö–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="marketTableBody">
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ market.js -->
                                <tr>
                                    <td colspan="6" class="table-loading">
                                        <div class="spinner" style="margin:0 auto;"></div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Sidebar: Trending -->
                    <div class="markets-sidebar">
                        <div class="card" id="trendingCard">
                            <div class="card-header">
                                <h3 class="card-title">üî• –õ–∏–¥–µ—Ä—ã –¥–Ω—è</h3>
                            </div>
                            <div class="trending-list" id="topStocksContainer">
                                <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- Asset Detail Modal -->
    <div id="assetModal" class="modal-overlay" style="display:none;" role="dialog" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-group">
                    <div class="modal-icon" id="modalAssetIcon">?</div>
                    <h2 id="modalAssetTitle">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                </div>
                <button id="closeModalBtn" class="close-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-metrics">
                    <div class="metric-card">
                        <div class="metric-label">–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞</div>
                        <div class="metric-value" id="modalAssetPrice">--</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">–ò–∑–º–µ–Ω–µ–Ω–∏–µ</div>
                        <div class="metric-value" id="modalAssetChange">--</div>
                    </div>
                </div>
                <div class="chart-container" style="height: 300px; margin-top: 20px;">
                    <canvas id="assetDetailChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="js/appState.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/market.js"></script>
</body>
</html>
