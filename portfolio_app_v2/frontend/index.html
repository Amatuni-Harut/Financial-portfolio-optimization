<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ—Ä—Ç—Ñ–µ–ª—å ‚Äî AssetAlpha</title>
    <script>(function(){document.documentElement.setAttribute('data-theme',localStorage.getItem('theme')||'dark');})()</script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>

<body>

    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é">
        <div class="hamburger"><span></span><span></span><span></span></div>
    </button>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="dashboard">

        <!-- Sidebar (–æ–±—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç) -->
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <div class="logo-icon">AA</div>
                <span class="logo-text">AssetAlpha</span>
            </div>
            <nav class="nav-section">
                <div class="nav-label">–ì–ª–∞–≤–Ω–æ–µ</div>
                <a href="index.html" class="nav-item active">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" rx="1"/>
                        <rect x="14" y="3" width="7" height="7" rx="1"/>
                        <rect x="3" y="14" width="7" height="7" rx="1"/>
                        <rect x="14" y="14" width="7" height="7" rx="1"/>
                    </svg>
                    –ü–æ—Ä—Ç—Ñ–µ–ª—å
                </a>
                <a href="markets.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                    </svg>
                    –°–∫—Ä–∏–Ω–µ—Ä —Ä—ã–Ω–∫–∞
                </a>
            </nav>
            <nav class="nav-section">
                <div class="nav-label">–ê–∫–∫–∞—É–Ω—Ç</div>
                <a href="settings.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.6 9a1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9"/>
                    </svg>
                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="theme-toggle">
                    <div class="theme-toggle-label">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"/>
                            <line x1="12" y1="1" x2="12" y2="3"/>
                            <line x1="12" y1="21" x2="12" y2="23"/>
                        </svg>
                        –¢–µ–º–∞
                    </div>
                    <div class="theme-switch" id="themeSwitch"></div>
                </div>
                <button class="logout-btn" onclick="window.location.href='login.html'">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    –í—ã—Ö–æ–¥
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <div class="header-left">
                    <h1>Dashboard</h1>
                    <p class="header-subtitle">–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è</p>
                </div>
            </div>

            <div class="container">

                <!-- Status Bar -->
                <div class="status-bar">
                    <div class="status-dot"></div>
                    <span class="status-text">API Connected</span>
                    <span class="status-text">‚Ä¢</span>
                    <span class="status-text" id="cacheStatus">Cache: Ready</span>
                    <span class="status-text">‚Ä¢</span>
                    <span class="status-text" id="assetCount">–ê–∫—Ç–∏–≤–æ–≤: 0</span>
                </div>

                <!-- Model Parameters -->
                <div class="card animate-in">
                    <div class="card-header">
                        <h2 class="card-title">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏</h2>
                        <span class="badge">–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û</span>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞</label>
                            <input type="date" id="startDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞</label>
                            <input type="date" id="endDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</label>
                            <select id="algorithm" class="form-select">
                                <option value="max_sharpe">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π Sharpe Ratio</option>
                                <option value="min_volatility">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å</option>
                                <option value="risk_parity">Risk Parity</option>
                                <option value="min_cvar">–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π CVaR</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ë–µ–∑—Ä–∏—Å–∫–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ (%)</label>
                            <input type="number" id="riskFreeRate" class="form-input" value="2.0" step="0.1" min="0" max="20">
                        </div>
                    </div>
                    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è "–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª" -->
                    <div id="proFeatures" style="display:none;" class="pro-feature-block">
                        <label class="toggle-label">
                            <span class="toggle-title">–†—É—á–Ω—ã–µ –≤–µ—Å–∞ (–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)</span>
                            <div class="toggle-switch" id="diversificationToggle"></div>
                        </label>
                    </div>
                </div>

                <!-- Asset Selection -->
                <div class="card animate-in" style="animation-delay: 0.1s;">
                    <div class="card-header">
                        <h2 class="card-title">üìä –í—ã–±–æ—Ä–∫–∞ —ç–º–∏—Ç–µ–Ω—Ç–æ–≤</h2>
                        <span class="badge" id="assetBadge">0 –í–´–ë–†–ê–ù–û</span>
                    </div>
                    <div class="search-wrapper">
                        <input type="text" id="searchInput" class="search-input form-input"
                            placeholder="–ü–æ–∏—Å–∫ —Ç–∏–∫–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, AAPL, MSFT)...">
                        <span class="search-icon">üîç</span>
                        <div id="searchResults" class="search-results"></div>
                    </div>
                    <div id="assetList" class="asset-grid" style="margin-top: 20px;">
                        <div class="empty-state">
                            <div class="empty-icon">üìà</div>
                            <p>–î–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º 2 –∞–∫—Ç–∏–≤–∞ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ—Ä—Ç—Ñ–µ–ª—è</p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="btn-group">
                    <button class="btn btn-primary" id="optimizeBtn">üöÄ –ó–∞–ø—É—Å–∫ –∞–ª–≥–æ—Ä–∏—Ç–º–∞</button>
                    <button class="btn btn-secondary" id="frontierBtn">üìâ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å S&P 500</button>
                    <button class="btn btn-secondary" id="refreshDataBtn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                </div>

                <!-- Loader -->
                <div id="loader" class="loader">
                    <div class="spinner"></div>
                    <p class="loader-text">// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è...</p>
                </div>

                <!-- Results -->
                <div id="results" style="display:none;">
                    <div class="card animate-in">
                        <div class="card-header">
                            <h2 class="card-title">üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è</h2>
                            <span class="badge">–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û</span>
                        </div>
                        <div class="metrics-dashboard">
                            <div class="metric-card">
                                <div class="metric-label">–û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
                                <div class="metric-value" id="metricReturn">--</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å</div>
                                <div class="metric-value" id="metricVol">--</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">Sharpe Ratio</div>
                                <div class="metric-value" id="metricSharpe">--</div>
                            </div>
                            <!-- –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ —á–µ—Ä–µ–∑ JS -->
                            <div class="metric-card" id="sortinoCard">
                                <div class="metric-label">Sortino Ratio</div>
                                <div class="metric-value" id="metricSortino">--</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è</div>
                                <div class="metric-value" id="metricDiv">--</div>
                            </div>
                            <!-- –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ —á–µ—Ä–µ–∑ JS -->
                            <div class="metric-card" id="cvarCard">
                                <div class="metric-label">CVaR (95%)</div>
                                <div class="metric-value" id="metricCVaR">--</div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-grid">
                        <div class="chart-wrapper">
                            <div class="chart-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤</div>
                            <div class="chart-container">
                                <canvas id="weightsChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-wrapper">
                            <div class="chart-title">–ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–∞</div>
                            <div class="chart-container">
                                <canvas id="riskChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script src="js/appState.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
